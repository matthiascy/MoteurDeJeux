cmake_minimum_required(VERSION 3.10.0)

set(ASSIMP_DIR ${SOURCE_DIR}/thirdparty/assimp)
set(ASSIMP_OUTPUT_DIR  ${OUTPUT_DIR_LIBRARY})

set(BUILD_SHARED_LIBS ON CACHE BOOL "" FORCE)
set(BUILD_TESTING OFF CACHE BOOL "" FORCE)
set(ASSIMP_OPT_BUILD_PACKAGES OFF CACHE BOOL "" FORCE)
set(ASSIMP_ANDROID_JNIIOSYSTEM OFF CACHE BOOL "" FORCE)
set(ASSIMP_NO_EXPORT ON CACHE BOOL "" FORCE)
set(ASSIMP_BUILD_ASSIMP_TOOLS OFF CACHE BOOL "" FORCE)
set(ASSIMP_BUILD_NONFREE_C4D_IMPORTER OFF CACHE BOOL "" FORCE)
set(ASSIMP_BUILD_SAMPLES OFF CACHE BOOL "" FORCE)
set(ASSIMP_BUILD_TESTS OFF CACHE BOOL "" FORCE)
#set(ASSIMP_BUILD_ZLIB OFF CACHE BOOL "" FORCE)
set(ASSIMP_INSTALL_PDB OFF CACHE BOOL "" FORCE)
set(IGNORE_GIT_HASH ON CACHE BOOL "" FORCE)

# Unused importer
set(ASSIMP_BUILD_3DS_IMPORTER ON CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_3DS_EXPORTER)

set(ASSIMP_BUILD_AC_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_AC_EXPORTER)

set(ASSIMP_BUILD_ASE_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_ASE_EXPORTER)

set(ASSIMP_BUILD_ASSBIN_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_ASSBIN_EXPORTER)

set(ASSIMP_BUILD_ASSXML_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_ASSXML_EXPORTER)

set(ASSIMP_BUILD_B3D_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_B3D_EXPORTER)

set(ASSIMP_BUILD_BVH_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_BVH_EXPORTER)

set(ASSIMP_BUILD_AMF_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_AMF_EXPORTER)

set(ASSIMP_BUILD_X3D_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_X3D_EXPORTER)

set(ASSIMP_BUILD_MMD_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_MMD_EXPORTER)

set(ASSIMP_BUILD_COLLADA_IMPORTER ON CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_COLLADA_EXPORTER)

set(ASSIMP_BUILD_DXF_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_DXF_EXPORTER)

set(ASSIMP_BUILD_CSM_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_CSM_EXPORTER)

set(ASSIMP_BUILD_HMP_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_HMP_EXPORTER)

set(ASSIMP_BUILD_IRRMESH_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_IRRMESH_EXPORTER)

set(ASSIMP_BUILD_IRR_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_IRR_EXPORTER)

set(ASSIMP_BUILD_LWO_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_LWO_EXPORTER)

set(ASSIMP_BUILD_LWS_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_LWS_EXPORTER)

set(ASSIMP_BUILD_MD2_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_MD2_EXPORTER)

set(ASSIMP_BUILD_MD3_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_MD3_EXPORTER)

set(ASSIMP_BUILD_MD5_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_MD5_EXPORTER)

set(ASSIMP_BUILD_MDC_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_MDC_EXPORTER)

set(ASSIMP_BUILD_MDL_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_MDL_EXPORTER)

set(ASSIMP_BUILD_NFF_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_NFF_EXPORTER)

set(ASSIMP_BUILD_NDO_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_NDO_EXPORTER)

set(ASSIMP_BUILD_OFF_IMPORTER ON CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_OFF_EXPORTER)

set(ASSIMP_BUILD_OBJ_IMPORTER ON CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_OBJ_EXPORTER)

set(ASSIMP_BUILD_OGRE_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_OGRE_EXPORTER)

set(ASSIMP_BUILD_OPENGEX_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_OPENGEX_EXPORTER)

set(ASSIMP_BUILD_PLY_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_PLY_EXPORTER)

set(ASSIMP_BUILD_MS3D_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_MS3D_EXPORTER)

set(ASSIMP_BUILD_COB_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_COB_EXPORTER)

set(ASSIMP_BUILD_BLEND_IMPORTER ON CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_BLEND_EXPORTER)

set(ASSIMP_BUILD_IFC_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_IFC_EXPORTER)

set(ASSIMP_BUILD_XGL_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_XGL_EXPORTER)

set(ASSIMP_BUILD_FBX_IMPORTER ON CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_FBX_EXPORTER)

set(ASSIMP_BUILD_Q3D_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_Q3D_EXPORTER)

set(ASSIMP_BUILD_Q3BSP_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_Q3BSP_EXPORTER)

set(ASSIMP_BUILD_RAW_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_RAW_EXPORTER)

set(ASSIMP_BUILD_SIB_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_SIB_EXPORTER)

set(ASSIMP_BUILD_SMD_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_SMD_EXPORTER)

set(ASSIMP_BUILD_STL_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_STL_EXPORTER)

set(ASSIMP_BUILD_TERRAGEN_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_TERRAGEN_EXPORTER)

set(ASSIMP_BUILD_3D_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_3D_EXPORTER)

set(ASSIMP_BUILD_X_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_XFILE_EXPORTER)

set(ASSIMP_BUILD_GLTF_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_GLTF_EXPORTER)

set(ASSIMP_BUILD_3MF_IMPORTER OFF CACHE BOOL "Build importer" FORCE)
add_definitions(-DASSIMP_BUILD_NO_3MF_EXPORTER)

add_subdirectory(${ASSIMP_DIR} "${CMAKE_CURRENT_BINARY_DIR}/thirdparty/assimp")

set_target_properties(assimp PROPERTIES
    LINKER_LANGUAGE CXX
    ARCHIVE_OUTPUT_DIRECTORY ${ASSIMP_OUTPUT_DIR}
    RUNTIME_OUTPUT_DIRECTORY ${OUTPUT_DIR_BINARY}
    LIBRARY_OUTPUT_DIRECTORY ${OUTPUT_DIR_BINARY}
    )